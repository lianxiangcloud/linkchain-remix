(this["webpackJsonplkchain-remix"]=this["webpackJsonplkchain-remix"]||[]).push([[0],{121:function(e,t,n){e.exports=n(207)},127:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var a,r=n(6),c=n.n(r),o=n(15),s=n(0),l=n.n(s),u=n(3),i=n.n(u),m=(n(127),n(49),n(18)),p=(n(55),n(14)),f=(n(56),n(28)),d=(n(57),n(4)),b=n(214),E=n(13),g=n(27),v=n(29),y=function(){var e=Object(o.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("RPC endpoint is null");case 2:return e.prev=2,a=new v.ethers.providers.JsonRpcProvider(t),e.next=6,a.listAccounts();case 6:if(!((n=e.sent).length>0)){e.next=9;break}return e.abrupt("return",n);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(2),new Error("Test connect error: ".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.send("eth_sendTransaction",[t]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return a.send("eth_getTransactionReceipt",[e])},j=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,a=0;return new Promise((function(r,c){t=setInterval((function(){if((a+=500)>n)return clearInterval(t),c("Get transaction receipt time out!");O(e).then((function(e){if(e)return clearInterval(t),r(e)}))}),500)}))},x=Object(g.b)({name:"lkconnect",initialState:{isConnect:!1,loading:!1,RPC:"http://localhost:36000",errorMsg:""},reducers:{setConnect:function(e,t){return Object.assign({},e,t.payload)}}}),C=x.actions.setConnect,k=x.reducer,w=Object(g.b)({name:"accounts",initialState:{accounts:[],currentAccount:"",txMeta:{gasLimit:"300000",value:"0x0"}},reducers:{setAccounts:function(e,t){e.accounts=t.payload},setCurrentAccount:function(e,t){e.currentAccount=t.payload},setTxMeta:function(e,t){e.txMeta=Object.assign({},e.txMeta,t.payload)}}}),S=w.actions,M=S.setAccounts,A=S.setCurrentAccount,L=S.setTxMeta,N=w.reducer,I=n(54),P=n(74),R=Object(g.b)({name:"deploy",initialState:{compilation:[],deployInfo:{status:"",errorMsg:""},contracts:{}},reducers:{addCompilation:function(e,t){var n,a=t.payload,r=a.data,c=a.source,o=[];if(r&&r.contracts){n=Object.keys(r.contracts)[0];for(var s=0,l=Object.keys(r.contracts[n]);s<l.length;s++){var u=l[s],i=r.contracts[n][u];o.push({name:u,abi:i.abi,bytecode:i.evm.bytecode.object,source:c.sources[c.target].content})}}e.compilation=o},setDeployInfo:function(e,t){e.deployInfo=t.payload},setContract:function(e,t){e.contracts[t.payload.address]=t.payload},deleteContract:function(e,t){delete e.contracts[t.payload]},clearContracts:function(e){e.contracts={}}}}),F=R.actions,T=F.addCompilation,D=F.setDeployInfo,B=F.setContract,G=F.deleteContract,J=F.clearContracts;function H(e){var t={};if(e.gasLimit<=0)throw new Error("Gas limit error!");return t.gas=e.gasLimit,e.value&&"0x00"!=e.value&&(t.value=e.value),t}var W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(){var n=Object(o.a)(c.a.mark((function n(a,r){var o,s,l,u,i,m;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.info(t),a(D({errorMsg:"",status:"deploying"})),o=r(),(s=o.accounts).currentAccount||a(D({errorMsg:"Select a from account to send transaction!",status:"finish"})),n.prev=4,l=new v.ethers.ContractFactory(e.abi,e.bytecode),u=l.getDeployTransaction.apply(l,Object(P.a)(t)),n.next=9,h(Object.assign({},u,{from:s.currentAccount},Object(I.a)({},H(s.txMeta))));case 9:return i=n.sent,n.next=12,j(i);case 12:if(!(m=n.sent)){n.next=21;break}if("0x1"!==m.status){n.next=19;break}a(B(Object(I.a)({address:m.contractAddress},e))),a(D({errorMsg:"",status:"end"})),n.next=21;break;case 19:if("0x0"!==m.status){n.next=21;break}throw new Error(m.vmerr);case 21:n.next=26;break;case 23:n.prev=23,n.t0=n.catch(4),a(D({errorMsg:n.t0.message,status:"end"}));case 26:case"end":return n.stop()}}),n,null,[[4,23]])})));return function(e,t){return n.apply(this,arguments)}}()},_=R.reducer,U=function(){var e=Object(E.c)((function(e){return e.lkconnect})),t=e.isConnect,n=e.RPC,r=e.loading,u=e.errorMsg,i=Object(E.b)();return Object(s.useEffect)((function(){t&&i(function(){var e=Object(o.a)(c.a.mark((function e(t){var n,r,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.listAccounts();case 2:if(n=e.sent,r=[],!(n&&n.length>0)){e.next=18;break}o=0;case 6:if(!(o<n.length)){e.next=14;break}return e.next=9,c=n[o],a.getBalance(c);case 9:s=e.sent,r.push({address:n[o],balance:s.toString()});case 11:o++,e.next=6;break;case 14:t(M(r)),t(A(r[0].address)),e.next=20;break;case 18:t(M([])),t(A(""));case 20:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}()),t||i(J())}),[t]),l.a.createElement("div",null,l.a.createElement(p.a,null,l.a.createElement(d.a,null,"LkchainRPC:"),l.a.createElement(d.a,null,l.a.createElement(f.a,{disabled:t,value:n,onChange:function(e){return i(C({RPC:e.target.value}))}}))),l.a.createElement(m.a,{style:{margin:"10px 10px 10px 0"},onClick:function(){return i(function(){var e=Object(o.a)(c.a.mark((function e(t,n){var a,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n().lkconnect,r=a.isConnect,o=a.RPC,e.prev=1,t(C({loading:!0})),!r){e.next=7;break}t(C({isConnect:!1,loading:!1})),e.next=10;break;case 7:return e.next=9,y(o);case 9:t(C({isConnect:!0,loading:!1,errorMsg:""}));case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t(C({loading:!1,errorMsg:e.t0.message})),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}())},disabled:r,type:"primary"},r&&l.a.createElement(b.a,null),t?"disconnect":"connect"),t&&l.a.createElement("span",{className:"successColor"},"Connected"),u&&l.a.createElement("span",{className:"errorColor"},u))},V=(n(111),n(33)),Z=n(12),$=n(71),q=n.n($),z=n(213),K=n(212),Q=n(210),X=function(){var e=Object(E.c)((function(e){return e.accounts})),t=e.accounts,n=e.currentAccount,a=Object(s.useState)(!1),r=Object(Z.a)(a,2),c=r[0],o=r[1],u=Object(s.useState)("ether"),i=Object(Z.a)(u,2),b=i[0],g=i[1],y=Object(s.useState)(3e5),h=Object(Z.a)(y,2),O=h[0],j=h[1],x=Object(s.useState)(0),C=Object(Z.a)(x,2),k=C[0],w=C[1],S=Object(E.b)();Object(s.useEffect)((function(){S(L(k?{value:v.utils.parseUnits(k,b).toHexString()}:{value:"0x0"}))}),[k,b]),Object(s.useEffect)((function(){S(L(O?{gasLimit:v.utils.hexStripZeros(v.utils.bigNumberify(O).toHexString())}:{gasLimit:"0x0"}))}),[O]);var M=function(e){var t=e.account;return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,t.address.substr(0,12),"...",t.address.substr(-8)," / ",v.utils.formatEther(t.balance),"ether"))};return l.a.createElement("div",null,l.a.createElement(p.a,{className:"row"},l.a.createElement(d.a,null,"Accounts:",l.a.createElement(m.a,{style:{float:"right",marginBottom:"5px"},onClick:function(){o(!c)}},"TxMeta ",c?l.a.createElement(z.a,null):l.a.createElement(K.a,null))),l.a.createElement(d.a,{span:22},l.a.createElement(V.a,{disabled:0===t.length,value:n,onChange:function(e){S(A(e))},style:{width:"100%"}},t.length>0&&t.map((function(e){return l.a.createElement(V.a.Option,{value:e.address,key:e.address},l.a.createElement(M,{account:e}))})))),l.a.createElement(d.a,{span:2},l.a.createElement(Q.a,{style:{paddingLeft:"10px"},onClick:function(){q()(n)}}))),c&&l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{gutter:[6,5]},l.a.createElement(d.a,{span:6},"GasLimit"),l.a.createElement(d.a,{span:18},l.a.createElement(f.a,{value:O,onChange:function(e){j(e.target.value)}}))),l.a.createElement(p.a,{gutter:[6,5]},l.a.createElement(d.a,{span:6},"Value"),l.a.createElement(d.a,{span:12},l.a.createElement(f.a,{value:k,onChange:function(e){w(e.target.value)}})),l.a.createElement(d.a,{span:6},l.a.createElement(V.a,{value:b,onChange:function(e){return g(e)}},l.a.createElement(V.a.Option,{value:"ether"},"ether"),l.a.createElement(V.a.Option,{value:"wei"},"wei"))))))},Y=n(209),ee=n(211),te=n(31),ne=n.n(te),ae=void 0,re=function(e){var t=e.abi,n=e.onSubmit,a=Object(s.useState)(!1),r=Object(Z.a)(a,2),c=r[0],o=r[1],u=Object(s.useState)([]),i=Object(Z.a)(u,2),E=i[0],g=i[1],v=Object(s.useState)(!1),y=Object(Z.a)(v,2),h=y[0],O=y[1],j=Object(s.useState)([]),x=Object(Z.a)(j,2),C=x[0],k=x[1],w=Object(s.useState)(""),S=Object(Z.a)(w,2),M=S[0],A=S[1],L=function(){return"constructor"===t.type?"Deploy":t.name?t.name:"fallback"},N=function(){A(""),O(!0),n(E.map((function(e){return e.trim()})),(function(e){console.info(e),e&&e.outputs&&k(e.outputs),e&&e.errorMsg&&A(e.errorMsg.message),O(!1)}))};return l.a.createElement(l.a.Fragment,null,!c&&l.a.createElement(p.a,{gutter:[0,10]},l.a.createElement(d.a,{span:10},l.a.createElement(m.a,{onClick:N,type:"view"===t.stateMutability?"":"primary"},h&&l.a.createElement(b.a,null)," ",L())),t.inputs&&t.inputs.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{span:13},l.a.createElement(f.a,{placeholder:t.inputs.length>0&&ne.a.pluck(t.inputs,"type").join(", "),value:E.join(","),onChange:function(e){g(e.target.value.split(","))}})),l.a.createElement(d.a,{span:1},l.a.createElement(z.a,{onClick:function(){return o(!0)}})))),c&&l.a.createElement(p.a,{className:"abiInputsPannel",gutter:[6,10]},l.a.createElement(d.a,null,"function: ",L(),l.a.createElement("span",{style:{float:"right"}},l.a.createElement(K.a,{onClick:function(){o(!1)}}))),t.inputs&&t.inputs.length>0&&t.inputs.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement(d.a,{span:8,style:{textAlign:"right"}},e.name),l.a.createElement(d.a,{span:16},l.a.createElement(f.a,{placeholder:e.type,value:E[t],onChange:function(e){!function(e,t){var n=ne.a.clone(E);n[t]=e.target.value,g(n)}(e,t)}})))})),l.a.createElement(d.a,{span:24},l.a.createElement(m.a,{type:"primary",onClick:N},h&&l.a.createElement(b.a,null)," Transact"))),t.outputs&&t.outputs.length>0&&l.a.createElement(p.a,null,C.map((function(e,t){return l.a.createElement(d.a,{key:t},t," ",e.name," ",e.type?"(".concat(e.type,")"):"",": ",e.value)}))),M&&l.a.createElement(p.a,null,l.a.createElement(d.a,{className:"errorColor"},M)))},ce=function(e){var t=e.contract,n=Object(E.c)((function(e){return e.accounts})),r=n.currentAccount,u=n.txMeta,i=Object(s.useState)(!1),m=Object(Z.a)(i,2),f=m[0],b=m[1],g=Object(s.useState)(t),y=Object(Z.a)(g,2),O=y[0],x=y[1],C=Object(E.b)();Object(s.useEffect)((function(){x(function(e){return new v.ethers.Contract(e.address,e.abi,a)}(t))}),[t]);var k=function(e,t){return e&&!ne.a.isArray(e)?[{value:e.toString(),type:t[0].type?t[0].type:"",name:t[0].name?t[0].name:""}]:e&&ne.a.isArray(e)&&e.length>1?ne.a.map(e,(function(e,n){return{value:e.toString(),type:t[n].type?t[n].type:"",name:t[n].name?t[n].name:""}})):[]},w=function(){var e=Object(o.a)(c.a.mark((function e(t,n,a){var o,s,l,i,m,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"view"!==t.stateMutability){e.next=9;break}return console.info(n),e.next=5,(o=O.functions[t.name]).call.apply(o,[ae].concat(Object(P.a)(n)));case 5:s=e.sent,a({outputs:k(s,t.outputs)}),e.next=18;break;case 9:return l=O.interface.functions[t.name].encode(n),i=Object.assign({data:l,to:O.address},u,{from:r}),e.next=13,h(i);case 13:return m=e.sent,e.next=16,j(m);case 16:(p=e.sent)&&("0x1"===p.status?a():"0x0"==p.status&&a({errorMsg:new Error(p.vmerr)}));case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0),a({errorMsg:e.t0});case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,n,a){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:f?"contractPannel":""},l.a.createElement(p.a,{className:"row"},l.a.createElement(d.a,{className:"contractCol"},t.name," at(","".concat(O.address.substr(0,6),"....").concat(O.address.substr(-8)),")",l.a.createElement("span",{style:{float:"right"}},f?l.a.createElement(K.a,{style:{paddingLeft:"10px"},onClick:function(){return b(!f)}}):l.a.createElement(z.a,{style:{paddingLeft:"10px"},onClick:function(){b(!f)}}),l.a.createElement(Q.a,{style:{paddingLeft:"10px"},onClick:function(){q()(O.address)}}),l.a.createElement(ee.a,{style:{paddingLeft:"10px"},onClick:function(){C(G(O.address))}})))),f&&ne.a.filter(O.interface.abi,(function(e){return"function"==e.type})).map((function(e,t){return l.a.createElement(re,{key:t,abi:e,onSubmit:function(t,n){return w(e,t,n)}})})))},oe=function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.deploy})),n=t.compilation,a=t.deployInfo,r=t.contracts,c=Object(s.useState)(""),o=Object(Z.a)(c,2),u=o[0],i=o[1],g=Object(s.useState)(!1),v=Object(Z.a)(g,2),y=v[0],h=v[1],O=Object(s.useState)(""),j=Object(Z.a)(O,2),x=j[0],C=j[1];Object(s.useEffect)((function(){n&&n.length>0&&i(n[0])}),[n]),Object(s.useEffect)((function(){var e=ne.a.find(u.abi,(function(e){return"constructor"===e.type}));h(e)}),[u]);return l.a.createElement("div",null,"Compiled contracts:",l.a.createElement(V.a,{style:{width:"100%",marginBottom:"5px"},value:u.name,onChange:function(e){var t=ne.a.find(n,(function(t){return t.name===e}));t&&i(t)}},n&&n.length>0&&n.map((function(e){return l.a.createElement(V.a.Option,{value:e.name,key:e.name},e.name)}))),l.a.createElement(p.a,{gutter:[16,5]},l.a.createElement(d.a,null,y?l.a.createElement(re,{abi:y,onSubmit:function(t,n){!function(t,n){e(W(u,t)).then((function(){n({errorMsg:a.errorMsg})}))}(t,n)}}):l.a.createElement(m.a,{type:"primary",onClick:function(){return e(W(u))}},"deploying"===a.status&&l.a.createElement(b.a,null)," Deploy")),l.a.createElement(d.a,null,"Or"),l.a.createElement(d.a,{span:4},l.a.createElement(m.a,{onClick:function(){e(B(Object(I.a)({address:x},u)))}},"At")),l.a.createElement(d.a,{span:20},l.a.createElement(f.a,{placeholder:"deployed contract address",value:x,onChange:function(e){return C(e.target.value)}}))),l.a.createElement(p.a,null,l.a.createElement(d.a,{className:"errorColor"},a.errorMsg)),r&&Object.keys(r).length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{className:"row"},l.a.createElement(d.a,null,l.a.createElement("span",null,"Deployed contracts:"),l.a.createElement("span",{style:{float:"right"}},l.a.createElement(Y.a,{onClick:function(){e(J())}})))),Object.keys(r).map((function(e){return l.a.createElement(ce,{key:e,contract:r[e]})}))))};n(206);var se=function(){var e=Object(E.c)((function(e){return e.lkconnect})).isConnect;return l.a.createElement("div",{className:"App"},l.a.createElement(U,null),e?l.a.createElement(l.a.Fragment,null,l.a.createElement(X,null),l.a.createElement(oe,null)):"")},le=Object(g.b)({name:"contract",initialState:{contracts:{}},reducers:{setContract:function(e,t){e.contracts[t.payload.address]=t.payload.contract},deleteContract:function(e,t){delete e.contracts[t.payload]},clearContracts:function(e){e.contracts={}}}}),ue=le.actions,ie=(ue.setContract,ue.deleteContract,ue.clearContracts,le.reducer),me=Object(g.a)({reducer:{lkconnect:k,accounts:N,deploy:_,contract:ie}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=n(118),fe=Object(pe.createIframeClient)();fe.onload(Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.a.render(l.a.createElement(E.a,{store:me},l.a.createElement(se,{client:fe})),document.getElementById("root")),e.next=3,fe.solidity.getCompilationResult();case 3:(t=e.sent)&&t.data&&me.dispatch(T(t)),fe.on("solidity","compilationFinished",(function(e,t,n,a){me.dispatch(T({data:a,source:t}))}));case 6:case"end":return e.stop()}}),e)})))),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[121,1,2]]]);
//# sourceMappingURL=main.a34c4f79.chunk.js.map